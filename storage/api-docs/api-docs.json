{
    "openapi": "3.0.0",
    "info": {
        "title": "HealApp API",
        "version": "1.0.0"
    },
    "paths": {
        "/api/v1/auth/register": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Register a new user",
                "description": "Register a new user with phone number and password. A verification code will be sent via SMS.",
                "operationId": "15ab81fc91b8e90f74ea030fc44604ca",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "phone",
                                    "password",
                                    "password_confirmation",
                                    "account_type"
                                ],
                                "properties": {
                                    "first_name": {
                                        "description": "User's first name (optional)",
                                        "type": "string",
                                        "example": "John",
                                        "nullable": true
                                    },
                                    "last_name": {
                                        "description": "User's last name (optional)",
                                        "type": "string",
                                        "example": "Doe",
                                        "nullable": true
                                    },
                                    "middle_name": {
                                        "description": "User's middle name (optional)",
                                        "type": "string",
                                        "example": "Michael",
                                        "nullable": true
                                    },
                                    "phone": {
                                        "description": "User's phone number (must be unique)",
                                        "type": "string",
                                        "example": "1234567890"
                                    },
                                    "password": {
                                        "description": "User's password (minimum 6 characters)",
                                        "type": "string",
                                        "format": "password",
                                        "example": "password123"
                                    },
                                    "password_confirmation": {
                                        "description": "Password confirmation",
                                        "type": "string",
                                        "format": "password",
                                        "example": "password123"
                                    },
                                    "account_type": {
                                        "description": "Account type: client, specialist, pansionat, or agency",
                                        "type": "string",
                                        "enum": [
                                            "client",
                                            "specialist",
                                            "pansionat",
                                            "agency"
                                        ],
                                        "example": "client"
                                    },
                                    "organization_name": {
                                        "description": "Organization name (optional, used for pansionat or agency)",
                                        "type": "string",
                                        "example": "Health Care Center",
                                        "nullable": true
                                    },
                                    "address": {
                                        "description": "Address (optional, used for organizations)",
                                        "type": "string",
                                        "example": "123 Main St, City",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Registration successful. SMS sent.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "SMS sent"
                                        },
                                        "phone": {
                                            "type": "string",
                                            "example": "1234567890"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/verify-phone": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Verify phone number with code",
                "description": "Verify the user's phone number using the verification code sent via SMS. Returns an access token upon successful verification.",
                "operationId": "65746a248b455edf984b9889998ccd23",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "phone",
                                    "code"
                                ],
                                "properties": {
                                    "phone": {
                                        "description": "User's phone number",
                                        "type": "string",
                                        "example": "1234567890"
                                    },
                                    "code": {
                                        "description": "4-digit verification code",
                                        "type": "string",
                                        "example": "1234"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Phone verified successfully. Access token issued.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "access_token": {
                                            "type": "string",
                                            "example": "1|abcdef123456..."
                                        },
                                        "user": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "first_name": {
                                                    "type": "string",
                                                    "example": "John"
                                                },
                                                "last_name": {
                                                    "type": "string",
                                                    "example": "Doe"
                                                },
                                                "middle_name": {
                                                    "type": "string",
                                                    "example": "Michael",
                                                    "nullable": true
                                                },
                                                "phone": {
                                                    "type": "string",
                                                    "example": "1234567890"
                                                },
                                                "phone_verified_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2024-01-01T00:00:00.000000Z"
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Invalid verification code",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Invalid verification code"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/login": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Login user",
                "description": "Authenticate user with phone and password. Returns an access token if credentials are valid and phone is verified.",
                "operationId": "5f72bb27f75e659cb11d621b660feaf8",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "phone",
                                    "password"
                                ],
                                "properties": {
                                    "phone": {
                                        "description": "User's phone number",
                                        "type": "string",
                                        "example": "1234567890"
                                    },
                                    "password": {
                                        "description": "User's password",
                                        "type": "string",
                                        "format": "password",
                                        "example": "password123"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Login successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "access_token": {
                                            "type": "string",
                                            "example": "1|abcdef123456..."
                                        },
                                        "user": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "first_name": {
                                                    "type": "string",
                                                    "example": "John"
                                                },
                                                "last_name": {
                                                    "type": "string",
                                                    "example": "Doe"
                                                },
                                                "middle_name": {
                                                    "type": "string",
                                                    "example": "Michael",
                                                    "nullable": true
                                                },
                                                "phone": {
                                                    "type": "string",
                                                    "example": "1234567890"
                                                },
                                                "phone_verified_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Invalid credentials or phone not verified",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Invalid credentials or phone not verified"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/auth/logout": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Logout user",
                "description": "Revoke the current access token for the authenticated user.",
                "operationId": "95268babc80be6aea5dffe685834b88c",
                "responses": {
                    "200": {
                        "description": "Logout successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Logged out successfully"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/auth/me": {
            "get": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Get current authenticated user",
                "description": "Returns the currently authenticated user's information.",
                "operationId": "de25913d74f2944f46950a52ab0b23ec",
                "responses": {
                    "200": {
                        "description": "User information retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "first_name": {
                                            "type": "string",
                                            "example": "John"
                                        },
                                        "last_name": {
                                            "type": "string",
                                            "example": "Doe"
                                        },
                                        "middle_name": {
                                            "type": "string",
                                            "example": "Michael",
                                            "nullable": true
                                        },
                                        "phone": {
                                            "type": "string",
                                            "example": "1234567890"
                                        },
                                        "phone_verified_at": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2024-01-01T00:00:00.000000Z"
                                        },
                                        "created_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "updated_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/auth/profile": {
            "patch": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Update user profile",
                "description": "Update the authenticated user's profile information (first_name, last_name, middle_name). All fields are optional - only provided fields will be updated.",
                "operationId": "e205796fb96e77acbdf10f972b0148db",
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "first_name": {
                                        "description": "User's first name",
                                        "type": "string",
                                        "example": "John",
                                        "nullable": true
                                    },
                                    "last_name": {
                                        "description": "User's last name",
                                        "type": "string",
                                        "example": "Doe",
                                        "nullable": true
                                    },
                                    "middle_name": {
                                        "description": "User's middle name",
                                        "type": "string",
                                        "example": "Michael",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Profile updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "first_name": {
                                            "type": "string",
                                            "example": "John"
                                        },
                                        "last_name": {
                                            "type": "string",
                                            "example": "Doe"
                                        },
                                        "middle_name": {
                                            "type": "string",
                                            "example": "Michael",
                                            "nullable": true
                                        },
                                        "phone": {
                                            "type": "string",
                                            "example": "1234567890"
                                        },
                                        "phone_verified_at": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2024-01-01T00:00:00.000000Z"
                                        },
                                        "created_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "updated_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/auth/change-phone/request": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Request phone number change",
                "description": "Initiate a phone number change by providing a new phone number. A verification code will be sent to the new phone number.",
                "operationId": "0e1735a30c4c54907b578d49b3639bf2",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "phone"
                                ],
                                "properties": {
                                    "phone": {
                                        "description": "New phone number (must be unique and not already in use)",
                                        "type": "string",
                                        "example": "9876543210"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Confirmation code sent to new phone",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Confirmation code sent to new phone"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/auth/change-phone/confirm": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Confirm phone number change",
                "description": "Confirm the phone number change by providing the verification code sent to the new phone number.",
                "operationId": "6e7ed92b9aa731696f23351c1d7d94d9",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "code"
                                ],
                                "properties": {
                                    "code": {
                                        "description": "4-digit verification code sent to the new phone number",
                                        "type": "string",
                                        "example": "1234"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Phone number updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Phone number updated successfully"
                                        },
                                        "user": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "first_name": {
                                                    "type": "string",
                                                    "example": "John"
                                                },
                                                "last_name": {
                                                    "type": "string",
                                                    "example": "Doe"
                                                },
                                                "middle_name": {
                                                    "type": "string",
                                                    "example": "Michael",
                                                    "nullable": true
                                                },
                                                "phone": {
                                                    "type": "string",
                                                    "example": "9876543210"
                                                },
                                                "phone_verified_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2024-01-01T00:00:00.000000Z"
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated or invalid verification code",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Invalid verification code or no pending phone change request"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/diary": {
            "get": {
                "tags": [
                    "Diary"
                ],
                "summary": "Get diary entries for a patient",
                "description": "Retrieve diary entries for a specific patient. Access is restricted to users who have access to the patient.",
                "operationId": "a68fef556ed9ed7777a5add9f10289f9",
                "parameters": [
                    {
                        "name": "patient_id",
                        "in": "query",
                        "description": "Patient ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "from_date",
                        "in": "query",
                        "description": "Filter entries from this date (YYYY-MM-DD)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "to_date",
                        "in": "query",
                        "description": "Filter entries to this date (YYYY-MM-DD)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Diary entries retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "type": "integer",
                                                "example": 1
                                            },
                                            "patient_id": {
                                                "type": "integer",
                                                "example": 1
                                            },
                                            "author_id": {
                                                "type": "integer",
                                                "example": 1
                                            },
                                            "type": {
                                                "type": "string",
                                                "enum": [
                                                    "care",
                                                    "physical",
                                                    "excretion",
                                                    "symptom"
                                                ],
                                                "example": "physical"
                                            },
                                            "key": {
                                                "type": "string",
                                                "example": "temperature"
                                            },
                                            "value": {
                                                "description": "Entry value as JSON object",
                                                "type": "object"
                                            },
                                            "notes": {
                                                "type": "string",
                                                "example": "Normal temperature",
                                                "nullable": true
                                            },
                                            "recorded_at": {
                                                "type": "string",
                                                "format": "date-time",
                                                "example": "2024-01-01T10:00:00.000000Z"
                                            },
                                            "created_at": {
                                                "type": "string",
                                                "format": "date-time"
                                            },
                                            "updated_at": {
                                                "type": "string",
                                                "format": "date-time"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request - patient_id is required",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "patient_id parameter is required"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Access denied",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "You do not have access to this patient."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Patient not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No query results for model [App\\\\Models\\\\Patient] {id}"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Diary"
                ],
                "summary": "Create a new diary entry",
                "description": "Create a new diary entry for a patient. Access is restricted to users who have access to the patient.",
                "operationId": "a7019a4acde87c987a65c3b56b4bffcd",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "patient_id",
                                    "type",
                                    "key",
                                    "value",
                                    "recorded_at"
                                ],
                                "properties": {
                                    "patient_id": {
                                        "description": "Patient ID",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "type": {
                                        "description": "Entry type",
                                        "type": "string",
                                        "enum": [
                                            "care",
                                            "physical",
                                            "excretion",
                                            "symptom"
                                        ],
                                        "example": "physical"
                                    },
                                    "key": {
                                        "description": "Entry key (e.g., 'temperature', 'blood_pressure', 'mood', 'diaper_change')",
                                        "type": "string",
                                        "example": "temperature"
                                    },
                                    "value": {
                                        "description": "Entry value as JSON object. Examples: value 36.6 for temperature, systolic 120 diastolic 80 for blood pressure",
                                        "type": "object"
                                    },
                                    "notes": {
                                        "description": "Optional notes",
                                        "type": "string",
                                        "example": "Normal temperature reading",
                                        "nullable": true
                                    },
                                    "recorded_at": {
                                        "description": "When the event actually happened",
                                        "type": "string",
                                        "format": "date-time",
                                        "example": "2024-01-01T10:00:00Z"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Diary entry created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "patient_id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "author_id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "type": {
                                            "type": "string",
                                            "example": "physical"
                                        },
                                        "key": {
                                            "type": "string",
                                            "example": "temperature"
                                        },
                                        "value": {
                                            "description": "Entry value as JSON object",
                                            "type": "object"
                                        },
                                        "notes": {
                                            "type": "string",
                                            "example": "Normal temperature",
                                            "nullable": true
                                        },
                                        "recorded_at": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2024-01-01T10:00:00.000000Z"
                                        },
                                        "created_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "updated_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Access denied",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "You do not have access to this patient."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Patient not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No query results for model [App\\\\Models\\\\Patient] {id}"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/notifications": {
            "get": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Get user notifications",
                "description": "Retrieve paginated list of notifications for the authenticated user.",
                "operationId": "c5492f71045d8a8c06daa023b355064d",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number for pagination",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Number of items per page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 15
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Notifications retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "example": "550e8400-e29b-41d4-a716-446655440000"
                                                    },
                                                    "type": {
                                                        "type": "string",
                                                        "example": "App\\\\Notifications\\\\TaskStatusUpdateNotification"
                                                    },
                                                    "data": {
                                                        "properties": {
                                                            "type": {
                                                                "type": "string",
                                                                "example": "task_status_update"
                                                            },
                                                            "task_id": {
                                                                "type": "integer",
                                                                "example": 1
                                                            },
                                                            "task_title": {
                                                                "type": "string",
                                                                "example": "Give medicine"
                                                            },
                                                            "patient_name": {
                                                                "type": "string",
                                                                "example": "Ivan Petrov"
                                                            },
                                                            "status": {
                                                                "type": "string",
                                                                "example": "completed"
                                                            }
                                                        },
                                                        "type": "object"
                                                    },
                                                    "read_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "nullable": true
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "current_page": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "per_page": {
                                            "type": "integer",
                                            "example": 15
                                        },
                                        "total": {
                                            "type": "integer",
                                            "example": 50
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/notifications/{id}/read": {
            "post": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Mark notification as read",
                "description": "Mark a specific notification as read.",
                "operationId": "c7e44a147e11f9500d1fb0a2a37caf20",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Notification ID",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Notification marked as read",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Notification marked as read"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Notification not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Notification not found"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/notifications/read-all": {
            "post": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Mark all notifications as read",
                "description": "Mark all unread notifications for the authenticated user as read.",
                "operationId": "e5e4221459feec9bd6ba6db40da2e0b6",
                "responses": {
                    "200": {
                        "description": "All notifications marked as read",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "All notifications marked as read"
                                        },
                                        "count": {
                                            "description": "Number of notifications marked as read",
                                            "type": "integer",
                                            "example": 5
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/notifications/unread-count": {
            "get": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Get unread notification count",
                "description": "Get the count of unread notifications for the authenticated user.",
                "operationId": "dbdbf67102fa76151dba6de1fd335520",
                "responses": {
                    "200": {
                        "description": "Unread count retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "unread_count": {
                                            "type": "integer",
                                            "example": 5
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/organization/employees": {
            "get": {
                "tags": [
                    "Organization"
                ],
                "summary": "Get organization employees",
                "description": "Retrieve all employees (users) belonging to the authenticated manager's organization.",
                "operationId": "4aaf5752c7585604673eade6d596653a",
                "responses": {
                    "200": {
                        "description": "Employees retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "type": "integer",
                                                "example": 2
                                            },
                                            "first_name": {
                                                "type": "string",
                                                "example": "Maria"
                                            },
                                            "last_name": {
                                                "type": "string",
                                                "example": "Ivanova"
                                            },
                                            "middle_name": {
                                                "type": "string",
                                                "example": "Petrovna",
                                                "nullable": true
                                            },
                                            "phone": {
                                                "type": "string",
                                                "example": "9876543210"
                                            },
                                            "organization_id": {
                                                "type": "integer",
                                                "example": 1
                                            },
                                            "created_at": {
                                                "type": "string",
                                                "format": "date-time"
                                            },
                                            "updated_at": {
                                                "type": "string",
                                                "format": "date-time"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Access denied - user is not a manager",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "You must be a manager to access this resource."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/organization/invite-employee": {
            "post": {
                "tags": [
                    "Organization"
                ],
                "summary": "Invite a new employee",
                "description": "Create a new employee (doctor or caregiver) and assign them to the manager's organization. Returns a temporary password for testing.",
                "operationId": "d82ef66bd6ef39f5db306fcc0130d904",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "phone",
                                    "role"
                                ],
                                "properties": {
                                    "phone": {
                                        "description": "Employee's phone number (must be unique)",
                                        "type": "string",
                                        "example": "9876543210"
                                    },
                                    "first_name": {
                                        "description": "Employee's first name (optional)",
                                        "type": "string",
                                        "example": "Maria",
                                        "nullable": true
                                    },
                                    "last_name": {
                                        "description": "Employee's last name (optional)",
                                        "type": "string",
                                        "example": "Ivanova",
                                        "nullable": true
                                    },
                                    "middle_name": {
                                        "description": "Employee's middle name",
                                        "type": "string",
                                        "example": "Petrovna",
                                        "nullable": true
                                    },
                                    "role": {
                                        "description": "Employee role",
                                        "type": "string",
                                        "enum": [
                                            "doctor",
                                            "caregiver"
                                        ],
                                        "example": "caregiver"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Employee created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "user": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 2
                                                },
                                                "first_name": {
                                                    "type": "string",
                                                    "example": "Maria"
                                                },
                                                "last_name": {
                                                    "type": "string",
                                                    "example": "Ivanova"
                                                },
                                                "phone": {
                                                    "type": "string",
                                                    "example": "9876543210"
                                                },
                                                "organization_id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "password": {
                                            "description": "Temporary password for testing (will be sent via SMS in production)",
                                            "type": "string",
                                            "example": "temp123456"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Access denied - user is not a manager",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "You must be a manager to invite employees."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/organization/assign-patient": {
            "post": {
                "tags": [
                    "Organization"
                ],
                "summary": "Assign a patient to an employee",
                "description": "Assign a patient to a caregiver or doctor. Both must belong to the same organization.",
                "operationId": "d45586e8ddf95dc20adc37b45feca04e",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "patient_id",
                                    "user_id"
                                ],
                                "properties": {
                                    "patient_id": {
                                        "description": "Patient ID",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "user_id": {
                                        "description": "Employee (caregiver/doctor) ID",
                                        "type": "integer",
                                        "example": 2
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Patient assigned successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Patient assigned to employee successfully"
                                        },
                                        "patient": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "first_name": {
                                                    "type": "string",
                                                    "example": "Ivan"
                                                },
                                                "last_name": {
                                                    "type": "string",
                                                    "example": "Petrov"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "user": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 2
                                                },
                                                "first_name": {
                                                    "type": "string",
                                                    "example": "Maria"
                                                },
                                                "last_name": {
                                                    "type": "string",
                                                    "example": "Ivanova"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Access denied",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "You do not have permission to assign patients."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error or business logic error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Patient and employee must belong to the same organization."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/organization": {
            "patch": {
                "tags": [
                    "Organization"
                ],
                "summary": "Update organization details",
                "description": "Update the organization's name, address, and/or phone. Only the manager (owner) can update.",
                "operationId": "e9103c6fa38ded7d20cad28193cf1e79",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "description": "Organization name",
                                        "type": "string",
                                        "example": "New Organization Name",
                                        "nullable": true
                                    },
                                    "address": {
                                        "description": "Organization address",
                                        "type": "string",
                                        "example": "123 Main St, City",
                                        "nullable": true
                                    },
                                    "phone": {
                                        "description": "Organization phone number",
                                        "type": "string",
                                        "example": "1234567890",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Organization updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Organization updated successfully"
                                        },
                                        "organization": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "name": {
                                                    "type": "string",
                                                    "example": "New Organization Name"
                                                },
                                                "type": {
                                                    "type": "string",
                                                    "example": "pansionat"
                                                },
                                                "phone": {
                                                    "type": "string",
                                                    "example": "1234567890"
                                                },
                                                "address": {
                                                    "type": "string",
                                                    "example": "123 Main St, City"
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Access denied - user is not a manager",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "You must be a manager to update the organization."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Organization not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "You do not have an organization."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/patients": {
            "get": {
                "tags": [
                    "Patients"
                ],
                "summary": "Get list of patients",
                "description": "Retrieve a list of patients. Clients see their own patients, managers see their organization's patients.",
                "operationId": "e59a656a255c7aad74dea51a9ec2e155",
                "responses": {
                    "200": {
                        "description": "List of patients retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "type": "integer",
                                                "example": 1
                                            },
                                            "creator_id": {
                                                "type": "integer",
                                                "example": 1
                                            },
                                            "organization_id": {
                                                "type": "integer",
                                                "example": 1,
                                                "nullable": true
                                            },
                                            "first_name": {
                                                "type": "string",
                                                "example": "Ivan"
                                            },
                                            "last_name": {
                                                "type": "string",
                                                "example": "Petrov"
                                            },
                                            "middle_name": {
                                                "type": "string",
                                                "example": "Sergeevich",
                                                "nullable": true
                                            },
                                            "birth_date": {
                                                "type": "string",
                                                "format": "date",
                                                "example": "1950-05-15",
                                                "nullable": true
                                            },
                                            "gender": {
                                                "type": "string",
                                                "enum": [
                                                    "male",
                                                    "female"
                                                ],
                                                "example": "male"
                                            },
                                            "weight": {
                                                "type": "integer",
                                                "example": 75,
                                                "nullable": true
                                            },
                                            "height": {
                                                "type": "integer",
                                                "example": 175,
                                                "nullable": true
                                            },
                                            "mobility": {
                                                "type": "string",
                                                "enum": [
                                                    "walking",
                                                    "sitting",
                                                    "bedridden"
                                                ],
                                                "example": "walking"
                                            },
                                            "address": {
                                                "type": "string",
                                                "example": "123 Main St, Moscow"
                                            },
                                            "diagnoses": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                },
                                                "example": [
                                                    "Stroke",
                                                    "Dementia"
                                                ],
                                                "nullable": true
                                            },
                                            "needed_services": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                },
                                                "example": [
                                                    "Nursing care",
                                                    "Physical therapy"
                                                ],
                                                "nullable": true
                                            },
                                            "created_at": {
                                                "type": "string",
                                                "format": "date-time"
                                            },
                                            "updated_at": {
                                                "type": "string",
                                                "format": "date-time"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Patients"
                ],
                "summary": "Create a new patient",
                "description": "Create a new patient profile. Clients create personal patients, managers create organization patients.",
                "operationId": "7d1497fbf9517f4d06f9ff15132b0634",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "first_name",
                                    "last_name",
                                    "gender",
                                    "mobility",
                                    "address"
                                ],
                                "properties": {
                                    "first_name": {
                                        "description": "Patient's first name",
                                        "type": "string",
                                        "example": "Ivan"
                                    },
                                    "last_name": {
                                        "description": "Patient's last name",
                                        "type": "string",
                                        "example": "Petrov"
                                    },
                                    "middle_name": {
                                        "description": "Patient's middle name",
                                        "type": "string",
                                        "example": "Sergeevich",
                                        "nullable": true
                                    },
                                    "birth_date": {
                                        "description": "Patient's birth date",
                                        "type": "string",
                                        "format": "date",
                                        "example": "1950-05-15",
                                        "nullable": true
                                    },
                                    "gender": {
                                        "description": "Patient's gender",
                                        "type": "string",
                                        "enum": [
                                            "male",
                                            "female"
                                        ],
                                        "example": "male"
                                    },
                                    "weight": {
                                        "description": "Weight in kg",
                                        "type": "integer",
                                        "example": 75,
                                        "nullable": true
                                    },
                                    "height": {
                                        "description": "Height in cm",
                                        "type": "integer",
                                        "example": 175,
                                        "nullable": true
                                    },
                                    "mobility": {
                                        "description": "Mobility status",
                                        "type": "string",
                                        "enum": [
                                            "walking",
                                            "sitting",
                                            "bedridden"
                                        ],
                                        "example": "walking"
                                    },
                                    "address": {
                                        "description": "Patient's address",
                                        "type": "string",
                                        "example": "123 Main St, Moscow"
                                    },
                                    "diagnoses": {
                                        "description": "Array of diagnoses",
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        },
                                        "example": [
                                            "Stroke",
                                            "Dementia"
                                        ],
                                        "nullable": true
                                    },
                                    "needed_services": {
                                        "description": "Array of needed services",
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        },
                                        "example": [
                                            "Nursing care",
                                            "Physical therapy"
                                        ],
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Patient created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "creator_id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "organization_id": {
                                            "type": "integer",
                                            "example": 1,
                                            "nullable": true
                                        },
                                        "first_name": {
                                            "type": "string",
                                            "example": "Ivan"
                                        },
                                        "last_name": {
                                            "type": "string",
                                            "example": "Petrov"
                                        },
                                        "middle_name": {
                                            "type": "string",
                                            "example": "Sergeevich",
                                            "nullable": true
                                        },
                                        "birth_date": {
                                            "type": "string",
                                            "format": "date",
                                            "example": "1950-05-15",
                                            "nullable": true
                                        },
                                        "gender": {
                                            "type": "string",
                                            "example": "male"
                                        },
                                        "weight": {
                                            "type": "integer",
                                            "example": 75,
                                            "nullable": true
                                        },
                                        "height": {
                                            "type": "integer",
                                            "example": 175,
                                            "nullable": true
                                        },
                                        "mobility": {
                                            "type": "string",
                                            "example": "walking"
                                        },
                                        "address": {
                                            "type": "string",
                                            "example": "123 Main St, Moscow"
                                        },
                                        "diagnoses": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            },
                                            "example": [
                                                "Stroke",
                                                "Dementia"
                                            ],
                                            "nullable": true
                                        },
                                        "needed_services": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            },
                                            "example": [
                                                "Nursing care",
                                                "Physical therapy"
                                            ],
                                            "nullable": true
                                        },
                                        "created_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "updated_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/patients/{id}": {
            "get": {
                "tags": [
                    "Patients"
                ],
                "summary": "Get a specific patient",
                "description": "Retrieve details of a specific patient. Access is restricted to the creator or organization members.",
                "operationId": "f0ba6808a3fd50a3aaad1a43025a7ade",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Patient ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Patient details retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "creator_id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "organization_id": {
                                            "type": "integer",
                                            "example": 1,
                                            "nullable": true
                                        },
                                        "first_name": {
                                            "type": "string",
                                            "example": "Ivan"
                                        },
                                        "last_name": {
                                            "type": "string",
                                            "example": "Petrov"
                                        },
                                        "middle_name": {
                                            "type": "string",
                                            "example": "Sergeevich",
                                            "nullable": true
                                        },
                                        "birth_date": {
                                            "type": "string",
                                            "format": "date",
                                            "example": "1950-05-15",
                                            "nullable": true
                                        },
                                        "gender": {
                                            "type": "string",
                                            "example": "male"
                                        },
                                        "weight": {
                                            "type": "integer",
                                            "example": 75,
                                            "nullable": true
                                        },
                                        "height": {
                                            "type": "integer",
                                            "example": 175,
                                            "nullable": true
                                        },
                                        "mobility": {
                                            "type": "string",
                                            "example": "walking"
                                        },
                                        "address": {
                                            "type": "string",
                                            "example": "123 Main St, Moscow"
                                        },
                                        "diagnoses": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            },
                                            "example": [
                                                "Stroke",
                                                "Dementia"
                                            ],
                                            "nullable": true
                                        },
                                        "needed_services": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            },
                                            "example": [
                                                "Nursing care",
                                                "Physical therapy"
                                            ],
                                            "nullable": true
                                        },
                                        "created_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "updated_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Access denied",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "You do not have access to this patient."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Patient not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No query results for model [App\\\\Models\\\\Patient] {id}"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Patients"
                ],
                "summary": "Update a patient",
                "description": "Update patient information. Access is restricted to the creator or organization members.",
                "operationId": "5f9e61b1c1677283dc6011a4aeb3ce7c",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Patient ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "first_name": {
                                        "type": "string",
                                        "example": "Ivan"
                                    },
                                    "last_name": {
                                        "type": "string",
                                        "example": "Petrov"
                                    },
                                    "middle_name": {
                                        "type": "string",
                                        "example": "Sergeevich",
                                        "nullable": true
                                    },
                                    "birth_date": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "1950-05-15",
                                        "nullable": true
                                    },
                                    "gender": {
                                        "type": "string",
                                        "enum": [
                                            "male",
                                            "female"
                                        ],
                                        "example": "male"
                                    },
                                    "weight": {
                                        "type": "integer",
                                        "example": 75,
                                        "nullable": true
                                    },
                                    "height": {
                                        "type": "integer",
                                        "example": 175,
                                        "nullable": true
                                    },
                                    "mobility": {
                                        "type": "string",
                                        "enum": [
                                            "walking",
                                            "sitting",
                                            "bedridden"
                                        ],
                                        "example": "walking"
                                    },
                                    "address": {
                                        "type": "string",
                                        "example": "123 Main St, Moscow"
                                    },
                                    "diagnoses": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        },
                                        "example": [
                                            "Stroke",
                                            "Dementia"
                                        ],
                                        "nullable": true
                                    },
                                    "needed_services": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        },
                                        "example": [
                                            "Nursing care",
                                            "Physical therapy"
                                        ],
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Patient updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "creator_id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "organization_id": {
                                            "type": "integer",
                                            "example": 1,
                                            "nullable": true
                                        },
                                        "first_name": {
                                            "type": "string",
                                            "example": "Ivan"
                                        },
                                        "last_name": {
                                            "type": "string",
                                            "example": "Petrov"
                                        },
                                        "middle_name": {
                                            "type": "string",
                                            "example": "Sergeevich",
                                            "nullable": true
                                        },
                                        "birth_date": {
                                            "type": "string",
                                            "format": "date",
                                            "example": "1950-05-15",
                                            "nullable": true
                                        },
                                        "gender": {
                                            "type": "string",
                                            "example": "male"
                                        },
                                        "weight": {
                                            "type": "integer",
                                            "example": 75,
                                            "nullable": true
                                        },
                                        "height": {
                                            "type": "integer",
                                            "example": 175,
                                            "nullable": true
                                        },
                                        "mobility": {
                                            "type": "string",
                                            "example": "walking"
                                        },
                                        "address": {
                                            "type": "string",
                                            "example": "123 Main St, Moscow"
                                        },
                                        "diagnoses": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            },
                                            "example": [
                                                "Stroke",
                                                "Dementia"
                                            ],
                                            "nullable": true
                                        },
                                        "needed_services": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            },
                                            "example": [
                                                "Nursing care",
                                                "Physical therapy"
                                            ],
                                            "nullable": true
                                        },
                                        "created_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "updated_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Access denied",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "You do not have access to this patient."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Patient not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No query results for model [App\\\\Models\\\\Patient] {id}"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Patients"
                ],
                "summary": "Delete a patient",
                "description": "Delete a patient. Access is restricted to the creator or organization members.",
                "operationId": "cc15578811a21fe08ef071bfc94b6790",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Patient ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Patient deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Patient deleted successfully"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Access denied",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "You do not have access to this patient."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Patient not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No query results for model [App\\\\Models\\\\Patient] {id}"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/stats/chart": {
            "get": {
                "tags": [
                    "Analytics"
                ],
                "summary": "Get diary chart data",
                "description": "Retrieve diary entries for a specific patient and key (e.g., temperature) over a time period. Returns data points for chart visualization.",
                "operationId": "07c105ac09a89ec83da1d29c0e3051e3",
                "parameters": [
                    {
                        "name": "patient_id",
                        "in": "query",
                        "description": "Patient ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "key",
                        "in": "query",
                        "description": "Diary entry key (e.g., 'temperature', 'blood_pressure', 'mood')",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "temperature"
                        }
                    },
                    {
                        "name": "period",
                        "in": "query",
                        "description": "Time period for data",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "default": "7_days",
                            "enum": [
                                "7_days",
                                "30_days"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Chart data retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "patient_id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "key": {
                                            "type": "string",
                                            "example": "temperature"
                                        },
                                        "period": {
                                            "type": "string",
                                            "example": "7_days"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "recorded_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2024-01-01T08:00:00.000000Z"
                                                    },
                                                    "value": {
                                                        "description": "JSON value from diary entry",
                                                        "type": "object",
                                                        "example": {
                                                            "value": "36.6"
                                                        }
                                                    },
                                                    "notes": {
                                                        "type": "string",
                                                        "example": "Normal temperature",
                                                        "nullable": true
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request - missing required parameters",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "patient_id and key parameters are required"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Access denied",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "You do not have permission to access this patient."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Patient not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No query results for model [App\\\\Models\\\\Patient] {id}"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/stats/tasks": {
            "get": {
                "tags": [
                    "Analytics"
                ],
                "summary": "Get task summary statistics",
                "description": "Retrieve task statistics for a patient on a specific date. Returns counts and completion rate.",
                "operationId": "c4e8dabfe5901fb914477cb1abbcaa5a",
                "parameters": [
                    {
                        "name": "patient_id",
                        "in": "query",
                        "description": "Patient ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "date",
                        "in": "query",
                        "description": "Date for statistics (YYYY-MM-DD). Defaults to today.",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date",
                            "example": "2024-01-01"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Task summary retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "patient_id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "date": {
                                            "type": "string",
                                            "format": "date",
                                            "example": "2024-01-01"
                                        },
                                        "total": {
                                            "description": "Total number of tasks",
                                            "type": "integer",
                                            "example": 10
                                        },
                                        "completed": {
                                            "description": "Number of completed tasks",
                                            "type": "integer",
                                            "example": 7
                                        },
                                        "missed": {
                                            "description": "Number of missed tasks",
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "pending": {
                                            "description": "Number of pending tasks",
                                            "type": "integer",
                                            "example": 2
                                        },
                                        "completion_rate": {
                                            "description": "Completion rate as percentage (0-100)",
                                            "type": "number",
                                            "format": "float",
                                            "example": 70
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request - patient_id is required",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "patient_id parameter is required"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Access denied",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "You do not have permission to access this patient."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Patient not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No query results for model [App\\\\Models\\\\Patient] {id}"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/tasks": {
            "get": {
                "tags": [
                    "Tasks"
                ],
                "summary": "Get tasks for a patient",
                "description": "Retrieve tasks for a specific patient within a date range. Access is restricted based on user role.",
                "operationId": "019ecd6e69c1e81dee2a8dc63251f8be",
                "parameters": [
                    {
                        "name": "patient_id",
                        "in": "query",
                        "description": "Patient ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "from_date",
                        "in": "query",
                        "description": "Filter tasks from this date (YYYY-MM-DD). Defaults to today.",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "to_date",
                        "in": "query",
                        "description": "Filter tasks to this date (YYYY-MM-DD). Defaults to today.",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Tasks retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "type": "integer",
                                                "example": 1
                                            },
                                            "patient_id": {
                                                "type": "integer",
                                                "example": 1
                                            },
                                            "template_id": {
                                                "type": "integer",
                                                "example": 1,
                                                "nullable": true
                                            },
                                            "title": {
                                                "type": "string",
                                                "example": "Give medicine"
                                            },
                                            "start_at": {
                                                "type": "string",
                                                "format": "date-time",
                                                "example": "2024-01-01T09:00:00.000000Z"
                                            },
                                            "end_at": {
                                                "type": "string",
                                                "format": "date-time",
                                                "example": "2024-01-01T09:30:00.000000Z"
                                            },
                                            "status": {
                                                "type": "string",
                                                "enum": [
                                                    "pending",
                                                    "completed",
                                                    "missed",
                                                    "cancelled"
                                                ],
                                                "example": "pending"
                                            },
                                            "completed_at": {
                                                "type": "string",
                                                "format": "date-time",
                                                "nullable": true
                                            },
                                            "completed_by": {
                                                "type": "integer",
                                                "example": 2,
                                                "nullable": true
                                            },
                                            "comment": {
                                                "type": "string",
                                                "example": "Patient refused",
                                                "nullable": true
                                            },
                                            "created_at": {
                                                "type": "string",
                                                "format": "date-time"
                                            },
                                            "updated_at": {
                                                "type": "string",
                                                "format": "date-time"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request - patient_id is required",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "patient_id parameter is required"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Access denied",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "You do not have permission to access this patient."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/tasks/{id}/status": {
            "patch": {
                "tags": [
                    "Tasks"
                ],
                "summary": "Update task status",
                "description": "Update the status of a task. Caregivers can mark tasks as completed or missed. Comment is required when marking as missed. When completing a task with a measurement value, provide 'value' (JSON) and optionally 'completed_at' (actual completion time). If the task has a related_diary_key, a diary entry will be automatically created.",
                "operationId": "33ebe5048d6a7037946ed860117ad855",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Task ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "status"
                                ],
                                "properties": {
                                    "status": {
                                        "description": "New status",
                                        "type": "string",
                                        "enum": [
                                            "completed",
                                            "missed",
                                            "cancelled"
                                        ],
                                        "example": "completed"
                                    },
                                    "comment": {
                                        "description": "Required if status is 'missed'",
                                        "type": "string",
                                        "example": "Patient refused",
                                        "nullable": true
                                    },
                                    "value": {
                                        "description": "Measurement value (JSON). Required if task has related_diary_key and status is 'completed'. For blood_pressure: systolic and diastolic. For temperature: value field.",
                                        "properties": {
                                            "systolic": {
                                                "type": "integer",
                                                "example": 120
                                            },
                                            "diastolic": {
                                                "type": "integer",
                                                "example": 80
                                            }
                                        },
                                        "type": "object",
                                        "nullable": true
                                    },
                                    "completed_at": {
                                        "description": "Actual time when the task was completed (format: Y-m-d H:i:s). If not provided, uses current time.",
                                        "type": "string",
                                        "format": "date-time",
                                        "example": "2024-01-01 14:30:00",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Task status updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "patient_id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "template_id": {
                                            "type": "integer",
                                            "example": 1,
                                            "nullable": true
                                        },
                                        "title": {
                                            "type": "string",
                                            "example": "Give medicine"
                                        },
                                        "start_at": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2024-01-01T09:00:00.000000Z"
                                        },
                                        "end_at": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2024-01-01T09:30:00.000000Z"
                                        },
                                        "status": {
                                            "type": "string",
                                            "example": "completed"
                                        },
                                        "completed_at": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2024-01-01T09:15:00.000000Z"
                                        },
                                        "completed_by": {
                                            "type": "integer",
                                            "example": 2
                                        },
                                        "comment": {
                                            "type": "string",
                                            "nullable": true
                                        },
                                        "created_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "updated_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Access denied",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "You do not have permission to update this task."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Task not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No query results for model [App\\\\Models\\\\Task] {id}"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/task-templates": {
            "get": {
                "tags": [
                    "Task Templates"
                ],
                "summary": "Get task templates for a patient",
                "description": "Retrieve task templates for a specific patient. Only clients and managers can access.",
                "operationId": "0018275dcb55267c1e5178642c88185a",
                "parameters": [
                    {
                        "name": "patient_id",
                        "in": "query",
                        "description": "Patient ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Task templates retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "type": "integer",
                                                "example": 1
                                            },
                                            "patient_id": {
                                                "type": "integer",
                                                "example": 1
                                            },
                                            "creator_id": {
                                                "type": "integer",
                                                "example": 1
                                            },
                                            "title": {
                                                "type": "string",
                                                "example": "Give medicine"
                                            },
                                            "days_of_week": {
                                                "type": "array",
                                                "items": {
                                                    "type": "integer"
                                                },
                                                "example": [
                                                    1,
                                                    3,
                                                    5
                                                ],
                                                "nullable": true
                                            },
                                            "time_ranges": {
                                                "type": "array",
                                                "items": {
                                                    "type": "object"
                                                },
                                                "example": [
                                                    {
                                                        "start": "09:00",
                                                        "end": "09:30"
                                                    }
                                                ]
                                            },
                                            "start_date": {
                                                "type": "string",
                                                "format": "date",
                                                "example": "2024-01-01"
                                            },
                                            "end_date": {
                                                "type": "string",
                                                "format": "date",
                                                "example": "2024-12-31",
                                                "nullable": true
                                            },
                                            "is_active": {
                                                "type": "boolean",
                                                "example": true
                                            },
                                            "created_at": {
                                                "type": "string",
                                                "format": "date-time"
                                            },
                                            "updated_at": {
                                                "type": "string",
                                                "format": "date-time"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request - patient_id is required",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "patient_id parameter is required"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Access denied",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "You do not have permission to access this patient."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Task Templates"
                ],
                "summary": "Create a new task template",
                "description": "Create a new task template and generate initial tasks. Only clients and managers can create templates.",
                "operationId": "db9aa1146f18a0e6cfb685775727350c",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "patient_id",
                                    "title",
                                    "time_ranges",
                                    "start_date"
                                ],
                                "properties": {
                                    "patient_id": {
                                        "description": "Patient ID",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "title": {
                                        "description": "Task name",
                                        "type": "string",
                                        "example": "Give medicine"
                                    },
                                    "days_of_week": {
                                        "description": "Array of day numbers (0=Sunday, 6=Saturday). Null = every day",
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        },
                                        "example": [
                                            1,
                                            3,
                                            5
                                        ],
                                        "nullable": true
                                    },
                                    "time_ranges": {
                                        "type": "array",
                                        "items": {
                                            "properties": {
                                                "start": {
                                                    "description": "Start time in H:i format",
                                                    "type": "string",
                                                    "example": "09:00"
                                                },
                                                "end": {
                                                    "description": "End time in H:i format",
                                                    "type": "string",
                                                    "example": "09:30"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "example": [
                                            {
                                                "start": "09:00",
                                                "end": "09:30"
                                            },
                                            {
                                                "start": "20:00",
                                                "end": "20:30"
                                            }
                                        ]
                                    },
                                    "start_date": {
                                        "description": "When this plan starts",
                                        "type": "string",
                                        "format": "date",
                                        "example": "2024-01-01"
                                    },
                                    "end_date": {
                                        "description": "If null, runs indefinitely",
                                        "type": "string",
                                        "format": "date",
                                        "example": "2024-12-31",
                                        "nullable": true
                                    },
                                    "is_active": {
                                        "description": "Whether the template is active",
                                        "type": "boolean",
                                        "example": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Task template created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "patient_id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "creator_id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "title": {
                                            "type": "string",
                                            "example": "Give medicine"
                                        },
                                        "days_of_week": {
                                            "type": "array",
                                            "items": {
                                                "type": "integer"
                                            },
                                            "example": [
                                                1,
                                                3,
                                                5
                                            ],
                                            "nullable": true
                                        },
                                        "time_ranges": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            },
                                            "example": [
                                                {
                                                    "start": "09:00",
                                                    "end": "09:30"
                                                }
                                            ]
                                        },
                                        "start_date": {
                                            "type": "string",
                                            "format": "date",
                                            "example": "2024-01-01"
                                        },
                                        "end_date": {
                                            "type": "string",
                                            "format": "date",
                                            "nullable": true
                                        },
                                        "is_active": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "created_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "updated_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Access denied",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "You do not have permission to create task templates."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/task-templates/{id}": {
            "delete": {
                "tags": [
                    "Task Templates"
                ],
                "summary": "Delete a task template",
                "description": "Delete a task template and all future pending tasks linked to it. Only clients and managers can delete templates.",
                "operationId": "572dfe85c1bd7a1919c9b1b28e5e622a",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Task Template ID",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Task template deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Task template deleted successfully"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Access denied",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "You do not have permission to delete this template."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Template not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No query results for model [App\\\\Models\\\\TaskTemplate] {id}"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        }
    },
    "components": {
        "securitySchemes": {
            "sanctum": {
                "type": "http",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Authentication",
            "description": "API endpoints for user authentication"
        },
        {
            "name": "Diary",
            "description": "API endpoints for patient diary entries"
        },
        {
            "name": "Notifications",
            "description": "API endpoints for managing user notifications"
        },
        {
            "name": "Organization",
            "description": "API endpoints for organization management"
        },
        {
            "name": "Patients",
            "description": "API endpoints for patient management"
        },
        {
            "name": "Analytics",
            "description": "API endpoints for analytics and chart data"
        },
        {
            "name": "Tasks",
            "description": "API endpoints for managing tasks"
        },
        {
            "name": "Task Templates",
            "description": "API endpoints for managing task templates (care plans)"
        }
    ]
}